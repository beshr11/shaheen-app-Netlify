# ???? ????? GitHub ??? Cloud Agents ? Bugbot

## ???? ????

??? ?????? ???? ????? ????? GitHub App ????? ?? Cloud Agents ? Bugbot ?? ????? `beshr11`.

## ????????? ????????

- ???? GitHub ?? ????? `beshr11`
- ?????? ??? ??????? ?????? ?? GitHub
- ???? ????? (endpoint) ???????? webhooks (?????? ?? Netlify Functions)

---

## ?????? 1: ????? GitHub App

### ??????? ??????? (??????? Manifest)

1. ???? ?????? ?????? ?? ???????:
   ```
   https://github.com/settings/apps/new?state=abc123
   ```

2. ?? ?????? GitHub CLI:
   ```bash
   gh api \
     --method POST \
     -H "Accept: application/vnd.github.v3+json" \
     /app-manifests/:code/conversions \
     -f manifest=@.github/github-app-manifest.json
   ```

3. ???? ????????? ????:
   - **App ID**
   - **Client ID**
   - **Client Secret**
   - **Private Key** (PEM format)

### ??????? ???????

1. ???? ???: **Settings ? Developer settings ? GitHub Apps ? New GitHub App**

2. ???? ????????? ????????:
   - **Application name**: `beshr11-cloud-agents`
   - **Homepage URL**: `https://github.com/beshr11`
   - **Webhook URL**: `https://your-site.netlify.app/.netlify/functions/github-webhook`
   - **Webhook secret**: ?? ?????? secret ?????? ??????

3. **Permissions & events**:
   ```
   Repository permissions:
   ?? Actions: Read
   ?? Checks: Read & write
   ?? Contents: Read & write
   ?? Issues: Read & write
   ?? Metadata: Read-only
   ?? Pull requests: Read & write
   ?? Repository projects: Read
   ?? Statuses: Read & write

   Subscribe to events:
   ?? Push
   ?? Pull request
   ?? Issues
   ?? Issue comment
   ?? Workflow run
   ?? Repository
   ```

4. **Where can this GitHub App be installed?**: 
   - ???? **Only on this account** ?? **Any account**

5. ???? **Create GitHub App**

6. ????:
   - **App ID**
   - **Client ID**
   - **Client Secret**
   - **Private Key** (???? **Generate a private key**)

---

## ?????? 2: ????? GitHub App ??? ???????

1. ???? ???: **Settings ? Developer settings ? GitHub Apps ? [??? ???????]**

2. ???? **Install App**

3. ???? **beshr11** ??????

4. ???? **All repositories** ?? **Only select repositories**

5. ???? **Install**

6. ??? ?????????

---

## ?????? 3: ????? ????????? ??????? ?? Netlify

1. ???? ??? Netlify Dashboard ? **Site settings ? Environment variables**

2. ??? ????????? ???????:

   ```
   GITHUB_APP_ID=your_app_id
   GITHUB_CLIENT_ID=your_client_id
   GITHUB_CLIENT_SECRET=your_client_secret
   GITHUB_WEBHOOK_SECRET=your_webhook_secret
   GITHUB_PRIVATE_KEY=-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----
   ```

   **??????**: ??? ??? Private Key? ?????? ?????? ??????? ?? `\n`

3. ???? ?????????

---

## ?????? 4: ????? ????? ???????

??????? ??????? ?????? ?????? ?? ???????:

### 1. `.bugbot.yml`
????? ??? ????? ????? ???????? ???????? ???????? ????????.

### 2. `.cursor/agent.yml`
????? ??? ??????? Cloud Agent ?????????? ????? ??????.

### 3. `.github/workflows/code-indexing.yml`
???? LSIF index ????? ?????? ?????? ???????.

---

## ?????? 5: ?????? ???????

### ?????? Webhook

1. ???? ???: **Settings ? Developer settings ? GitHub Apps ? [??? ???????]**

2. ???? **Advanced ? Recent Deliveries**

3. ???? ???? ??????? ?????? ??:
   - **Status**: 200 OK
   - **Response**: ????? ????

### ?????? Bugbot

1. ???? issue ???? ?? ??? ??????????
2. ???? ?? ????? ???????? ????????
3. ???? ?? ??????? ???????? (??? ??? ???????)

### ?????? Cloud Agent

1. ???? Pull Request ????
2. ???? ??:
   - ????????? ?????????
   - ??????? ???????? ????????
   - ????? PRs ??????? (??? ??? ??????)

---

## ?????? 6: ????? Code Indexing

### ??????

1. ???? ??? ?? repository ?? GitHub
2. ????? ??? **Actions** tab
3. ???? workflow **Code Indexing (LSIF)** ??????

### ????????

????? ???????? ???:
- Push ??? branches ??????
- ??? Pull Request ????

---

## ??????? ???????

### Webhook ?? ????

1. ???? ?? **Webhook URL** ?? ??????? GitHub App
2. ???? ?? ????????? ??????? ?? Netlify
3. ???? ????? Netlify Functions:
   ```
   netlify functions:log github-webhook
   ```

### ????????? ??? ?????

1. ???? ??? **Settings ? Developer settings ? GitHub Apps ? [??? ???????]**
2. ???? **Permissions & events**
3. ???? ?? ????? ????????? ????????

### LSIF Indexing ?? ????

1. ???? ?? ???? `tsconfig.json` ?? ???????
2. ???? ????? GitHub Actions
3. ???? ?? ????? `@sourcegraph/lsif-typescript` ?? workflow

---

## ??????

### Best Practices

1. **?? ????? Private Key** ?? ????? ?? Git
2. ?????? **Environment Variables** ?? Netlify
3. ???? **Webhook signature verification** (????? ?? ?????)
4. ???? ????????? ???????
5. ?????? **secrets rotation** ?? 90 ???

### ?????? ?? ???????

????? ?? `netlify/functions/github-webhook.ts` ????? ?? ????? GitHub ???????? ???????? `GITHUB_WEBHOOK_SECRET`.

---

## ??????? ???????

1. ? ????? GitHub App
2. ? ????? App ??? ???????
3. ? ????? ??????? ?????
4. ? ????? ????? ???????
5. ? ?????? Webhook
6. ? ????? Code Indexing
7. ?? ????? ????? Bugbot ??? ?????????
8. ?? ????? ??????? Cloud Agent

---

## ?????

??? ????? ?????:

1. ???? ????? Netlify Functions
2. ???? GitHub Actions logs
3. ???? GitHub App delivery logs
4. ???? ?? ???????? ?? GitHub

---

## ????? ?????

- [GitHub Apps Documentation](https://docs.github.com/en/apps)
- [GitHub Webhooks Guide](https://docs.github.com/en/webhooks)
- [LSIF Documentation](https://lsif.dev/)
- [Netlify Functions](https://docs.netlify.com/functions/overview/)
