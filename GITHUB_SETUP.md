# ???? ????? GitHub ?? Cursor Cloud Agents ? Bugbot

??? ?????? ???? ??????? ???????? ??? ?????? GitHub ????? ?? Cursor Cloud Agents ? Bugbot.

---

## ?? Checklist ??????

- [ ] ????? GitHub App
- [ ] ????? App ??? ????? beshr11
- [ ] ????? Webhook URL
- [ ] ??? Private Key ? App ID
- [ ] ????? Secrets ??? GitHub
- [ ] ????? GitHub Actions workflow ??? LSIF
- [ ] ?????? ???????

---

## ?????? 1: ????? GitHub App

### ??????? ??????: ??????? Manifest (??????)

1. ???? ?????? ?????? ?? ???????:
   ```
   https://github.com/settings/apps/new?manifest=1
   ```

2. ???? ????? ??? `.github/app-manifest.json` ?????? ?? ??????

3. ???? "Create GitHub App"

4. **???? ????????? ???????:**
   - **App ID**: ????? ?? ???? ?????????
   - **Private Key**: ???? "Generate a private key" ????? ????? `.pem`

### ??????? ???????: ??????? ??????

1. ???? ???: `https://github.com/settings/apps/new`

2. ???? ????????? ????????:
   - **GitHub App name**: `Cursor Cloud Agents & Bugbot`
   - **Homepage URL**: `https://cursor.sh`
   - **User authorization callback URL**: `https://cursor.sh/github/callback`
   - **Webhook URL**: `https://your-webhook-endpoint.com/github/webhook` (?? ????? ?????? ??????)
   - **Webhook secret**: ???? secret ?????? ??????

3. **Permissions - ???? ????????? ???????:**

   | Permission | Access Level |
   |------------|--------------|
   | Actions | Read-only |
   | Checks | Read & write |
   | Contents | Read & write |
   | Issues | Read & write |
   | Metadata | Read-only (???????) |
   | Pull requests | Read & write |

4. **Subscribe to events - ??? ??????? ???????:**
   - ? Push
   - ? Pull request
   - ? Issues
   - ? Issue comment
   - ? Workflow run
   - ? Check run
   - ? Check suite

5. ??? "Where can this GitHub App be installed?"
   - ? "Only on this account" (??? ??? ?????? ??? ??????)
   - ? "Any account" (??? ??? ?????? ????? ????????)

6. ???? "Create GitHub App"

---

## ?????? 2: ????? GitHub App ??? ????? beshr11

1. ???? ??? ???? App ???? ???????:
   ```
   https://github.com/settings/apps/YOUR_APP_NAME
   ```

2. ???? "Install App" ?? ?????? ???????

3. ???? "beshr11" ??????

4. ???? ???????:
   - **All repositories** (????? ??????????)
   - **Only select repositories** (????????? ?????)

5. ???? "Install"

6. **???? Installation ID:**
   - ????? ?? URL ??? ???????
   - ????: `https://github.com/settings/installations/12345678`
   - ????? `12345678` ?? Installation ID

---

## ?????? 3: ????? Webhook (??????? - ????????)

??? ??? ???? ?????? webhook ??????:

### ??????? ngrok ???????? ??????:

```bash
# ????? ngrok
npm install -g ngrok

# ????? ngrok
ngrok http 3000

# ???? ??? HTTPS URL ????? ?? GitHub App webhook URL
# ????: https://abc123.ngrok.io/github/webhook
```

### ?? ??????? ???? Webhook Server:

???? ??? `webhook-server-example.js` ?? ???????? (???? ??????).

---

## ?????? 4: ??? Secrets ?? GitHub

### ???????? ??????:

1. ???? ???: `https://github.com/beshr11/YOUR_REPO/settings/secrets/actions`

2. ???? "New repository secret"

3. ??? ??? Secrets ???????:

   | Secret Name | ?????? |
   |-------------|--------|
   | `GITHUB_APP_ID` | App ID ?? ?????? 1 |
   | `GITHUB_APP_PRIVATE_KEY` | ????? ??? `.pem` (????? ??????) |
   | `GITHUB_APP_INSTALLATION_ID` | Installation ID ?? ?????? 2 |
   | `WEBHOOK_SECRET` | Webhook secret (??? ??? ?????? webhook) |

### ??????? (Organization-level):

1. ???? ???: `https://github.com/organizations/beshr11/settings/secrets/actions`

2. ???? "New organization secret"

3. ??? ??? ??? Secrets ?????

4. ???? ?????????? ???? ?????? ?????? ???? ??? Secrets

---

## ?????? 5: ????? GitHub Actions Workflow

1. ???? ?? ???? ??? `.github/workflows/code-indexing.yml` ?? ????????

2. ???? ???: `https://github.com/beshr11/YOUR_REPO/actions`

3. ???? "I understand my workflows, enable them"

4. Workflow ????? ???????? ???:
   - Push ??? main/master
   - Pull Request ????
   - ????? ???? (Workflow dispatch)

---

## ?????? 6: ????? ????? ???????

### ??? `.bugbot.yml`

????? ????? ?? ??? ????????. ????? ?????? ??? ?????????:

- ????? ??????? ???????? (Auto-labeling)
- ????? ??????? ???????? (Auto-assignment)
- ????? Issues ??????? (Stale issues)

### ??? `.cursor/agent.yml`

????? ????? ?? `.cursor/agent.yml`. ????:

- ??????? ?????? ???????
- ????? ??? Agents
- ??????? ??????

---

## ?????? 7: ????????

### ?????? 1: ????? Issue

1. ???? issue ???? ?? ????????
2. Bugbot ??? ?? ???? labels ???????? ??? `.bugbot.yml`

### ?????? 2: ??? Pull Request

1. ???? PR ????
2. ???? ?? ?? GitHub Actions workflow ????
3. ???? ?? ?? LSIF indexing ????

### ?????? 3: Webhook (??? ??? ???????)

1. ???? webhook logs ?? GitHub App settings
2. ?? ??? action (push, issue, PR)
3. ???? ?? ?? webhook ??? ??? endpoint ????? ??

---

## ?????? 8: ?????? ?? ?????????

???? ?? ?? GitHub App ???? ????????? ???????:

```bash
# ????? ?????? ?? ???? GitHub API:
curl -H "Authorization: Bearer YOUR_TOKEN" \
  https://api.github.com/app/installations/YOUR_INSTALLATION_ID

# ?? ?? ???? GitHub CLI:
gh api app/installations/YOUR_INSTALLATION_ID
```

---

## ??????? ???????

### ???????: Webhook ?? ???

**????:**
- ???? ?? ?? webhook URL ???? ?????
- ???? ?? webhook secret
- ???? webhook delivery logs ?? GitHub App settings

### ???????: Workflow ?? ????

**????:**
- ???? ?? ?? GitHub Actions ???? ?? ????????
- ???? ?? Secrets
- ???? workflow logs ?? Actions tab

### ???????: App ?? ???? ???????

**????:**
- ???? ??? App settings
- ???? ?? Permissions
- ??? ????? App ??? ??? ?????

---

## ??????? ??????

### GitHub App Authentication

??????? ?? GitHub API ???????? GitHub App:

```javascript
// ???? JavaScript
const jwt = require('jsonwebtoken');
const axios = require('axios');

// ????? JWT
const privateKey = process.env.GITHUB_APP_PRIVATE_KEY;
const appId = process.env.GITHUB_APP_ID;

const token = jwt.sign(
  { iss: appId },
  privateKey,
  { expiresIn: '10m', algorithm: 'RS256' }
);

// ?????? ??? Installation Token
const installationId = process.env.GITHUB_APP_INSTALLATION_ID;
const response = await axios.post(
  `https://api.github.com/app/installations/${installationId}/access_tokens`,
  {},
  { headers: { Authorization: `Bearer ${token}` } }
);

const accessToken = response.data.token;
```

### ????? ?????

- [GitHub Apps Documentation](https://docs.github.com/en/apps)
- [GitHub API Documentation](https://docs.github.com/en/rest)
- [LSIF Specification](https://microsoft.github.io/language-server-protocol/specifications/lsif/)
- [Cursor Documentation](https://cursor.sh/docs)

---

## ??????? ????

1. **Private Key**: ????? ?? ???? ??? ??? ??????
2. **Webhook Secret**: ?????? secret ???
3. **Permissions**: ??? ??? ??????? ?????? (Principle of Least Privilege)
4. **Testing**: ????? ?? ?????? ?????? ?????

---

## ??????? ???????

**?: ?? ?????? ??????? GitHub App ???? ????? ???????????**

?: ???? ????? ????? App ???? ??? ???? ?????????? ?? ???????.

**?: ?? ????? webhook?**

?: ????? ??? ????????. ??? ??? ?????? Bugbot ?????? ????? webhook. ??? ??? ?????? ??? Cursor Agents? ?? ?? ??????.

**?: ??? ???? App ??? ??????????**

?: ??? ????? Permissions ?? Events? ??? ????? ????? App ??? ??????????.

---

**??? ?????:** 2025-01-27
